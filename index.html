<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>NeoCity Neon Grid Test</title>
  <style>
    html,body { margin:0; padding:0; background:#000; overflow:hidden; }
    #gameCanvas { display:block; margin:0 auto; position:relative; }
    #hud { position:absolute; top:10px; left:10px; color:#0ff; font:16px monospace; z-index:5; }
    .choice { margin-left:10px; color:#0ff; cursor:pointer; }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="600" tabindex="0"></canvas>
  <div id="hud">
    Reputation: <span id="rep">0</span>
    <span class="choice" id="skillBtn">[Skills]</span>
  </div>

  <script>
  (function(){
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const VIEW_W = canvas.width, VIEW_H = canvas.height;
    const TILE = 32, MAP_C = 50, MAP_R = 32;
    const WORLD_W = MAP_C * TILE, WORLD_H = MAP_R * TILE;

    let cityOffset = 0;
    let rep = 0;
    document.getElementById('skillBtn').onclick = () => alert('Skills clicked');

    function drawParallax() {
      cityOffset = (cityOffset + 0.2) % VIEW_W;
      ctx.save();
      ctx.translate(-cityOffset, 0);
      ctx.fillStyle = 'rgba(255,0,255,0.1)';
      for (let i = 0; i < VIEW_W; i += VIEW_W/20) {
        ctx.fillRect(i, VIEW_H*0.6, VIEW_W/30, VIEW_H*0.4);
      }
      ctx.translate(VIEW_W, 0);
      for (let i = 0; i < VIEW_W; i += VIEW_W/20) {
        ctx.fillRect(i, VIEW_H*0.6, VIEW_W/30, VIEW_H*0.4);
      }
      ctx.restore();
    }

    function drawNeonGrid() {
      ctx.save();
      ctx.strokeStyle = 'rgba(255,0,255,0.15)';
      ctx.lineWidth = 1;
      // vertical lines
      for (let x = 0; x <= WORLD_W; x += TILE*5) {
        const sx = (x + cityOffset*0.5) % VIEW_W;
        ctx.beginPath();
        ctx.moveTo(sx, 0);
        ctx.lineTo(sx, VIEW_H);
        ctx.stroke();
      }
      // horizontal lines
      for (let y = 0; y <= WORLD_H; y += TILE*5) {
        const sy = (y + cityOffset*0.3) % VIEW_H;
        ctx.beginPath();
        ctx.moveTo(0, sy);
        ctx.lineTo(VIEW_W, sy);
        ctx.stroke();
      }
      ctx.restore();
    }

    function mainLoop() {
      // clear
      ctx.clearRect(0, 0, VIEW_W, VIEW_H);

      // parallax skyline
      drawParallax();

      // neon grid
      drawNeonGrid();

      // HUD update if needed
      // document.getElementById('rep').innerText = rep;

      requestAnimationFrame(mainLoop);
    }

    // start
    mainLoop();
  })();
  </script>
</body>
</html>
